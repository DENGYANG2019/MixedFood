<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>å°æ¸¸æˆåˆé›†ï¼šæ‰«é›· & è´ªåƒè›‡ & é£æœºå¤§æˆ˜</title>
    <link rel="stylesheet" href="assets/css/style.css?v=20250813b">
</head>
<body>
    <div id="main-layout">
        <div id="sidebar">
            <button id="menu-toggle" class="menu-toggle" onclick="toggleMenu()" aria-expanded="false">â˜° èœå•</button>
            <div id="menu-buttons">
                <button id="tab-minesweeper" onclick="showGame('minesweeper')">æ‰«é›·</button>
                <button id="tab-snake" onclick="showGame('snake')">è´ªåƒè›‡</button>
                <button id="tab-plane" onclick="showGame('plane')">é£æœºå¤§æˆ˜</button>
                <button id="tab-mole" onclick="showGame('mole')">æ‰“åœ°é¼ </button>
                <!-- Add Tetris tab -->
                <button id="tab-tetris" onclick="showGame('tetris')">ä¿„ç½—æ–¯æ–¹å—</button>
                <!-- Add Quantum Attack tab -->
                <button id="tab-quantum" onclick="showGame('quantum')">é‡å­æ”»å‡»</button>
            </div>
        </div>
        <div id="game-contents">
            <h1 id="main-title">å°æ¸¸æˆåˆé›†</h1>
            <div id="minesweeper-section">
                <div id="game-controls">
                    <button id="minesweeper-newgame" onclick="startGame()">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <span id="status"></span><span id="minesweeper-besttime"></span>
                </div>
                <div id="minefield"></div>
            </div>
            <div id="snake-section" style="display:none;">
                <div id="snake-controls">
                    <button id="snake-newgame" onclick="startSnake()">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <span id="snake-status"></span>
                    <span id="snake-highscore"></span>
                </div>
                <canvas id="snake-canvas" width="480" height="480"></canvas>
            </div>
            <div id="plane-section" style="display:none;">
                <div id="plane-controls">
                    <button id="plane-newgame" onclick="startPlane()">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <span id="plane-status"></span>
                    <span id="plane-highscore"></span>
                </div>
                <canvas id="plane-canvas" width="400" height="500"></canvas>
            </div>
            <div id="mole-section" style="display:none;">
                <div id="mole-controls">
                    <button id="mole-newgame" onclick="startMole()">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <span id="mole-status"></span>
                    <span id="mole-highscore"></span>
                </div>
                <canvas id="mole-canvas" width="400" height="400"></canvas>
            </div>
            <!-- Tetris Section -->
            <div id="tetris-section" style="display:none;">
                <div id="tetris-controls">
                    <button id="tetris-newgame">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <button id="tetris-pause">æš‚åœ/ç»§ç»­</button>
                    <button id="tetris-reset">é‡ç½®</button>
                    <span id="tetris-status"></span>
                </div>
                <div id="tetris-stats">
                    <span>å¾—åˆ†ï¼š</span><span id="tetris-score">0</span>
                    <span style="margin-left:12px;">è¡Œæ•°ï¼š</span><span id="tetris-lines">0</span>
                    <span style="margin-left:12px;">ç­‰çº§ï¼š</span><span id="tetris-level">1</span>
                </div>
                <div id="tetris-field" class="tetris-field">
                    <canvas id="tetris-canvas" width="300" height="600" aria-label="Tetris field" role="img"></canvas>
                    <div id="tetris-overlay" class="tetris-overlay" aria-live="polite" style="display:none;"></div>
                </div>
                <!-- Right-side preview (mobile) -->
                <div id="tetris-next-wrap" class="tetris-next-mobile">
                    <canvas class="tetris-next" id="tetris-next0" width="60" height="60"></canvas>
                </div>
                <!-- Right-side actions (mobile) -->
                <div class="tetris-mobile-right" aria-label="å³ä¾§æ“ä½œ">
                    <button id="tetris-rotate" class="ctrl action rotate" aria-label="Rotate">âŸ³</button>
                    <button id="tetris-drop" class="ctrl action primary" aria-label="Hard drop">â¤“</button>
                </div>
                <!-- Bottom-left circular D-pad (mobile) -->
                <div class="tetris-dpad" aria-label="æ–¹å‘é”®">
                    <button id="tetris-left" class="ctrl dpad left" aria-label="Left">â†</button>
                    <button id="tetris-right" class="ctrl dpad right" aria-label="Right">â†’</button>
                    <button id="tetris-down" class="ctrl dpad down" aria-label="Soft drop">â†“</button>
                </div>
                <!-- helper text -->
                <div style="margin-top:8px; font-size: 14px; color:#666;">
                    â† â†’ ç§»åŠ¨ï¼Œâ†‘ æ—‹è½¬ï¼Œâ†“ ä¸‹è½ï¼Œç©ºæ ¼ ç›´è½ï¼ŒP æš‚åœï¼ŒR é‡ç½®
                </div>
            </div>
            <!-- Quantum Attack Section -->
            <div id="quantum-section" style="display:none;">
                <div id="quantum-controls">
                    <button id="quantum-newgame" onclick="startQuantumAttack()">å¼€å§‹æ–°æ¸¸æˆ</button>
                    <button id="quantum-pause" onclick="pauseQuantumAttack()">æš‚åœ/ç»§ç»­</button>
                    <button id="quantum-reset" onclick="resetQuantumAttack()">é‡ç½®</button>
                    <span id="quantum-status"></span>
                </div>
                <div id="quantum-info">
                    <span id="quantum-highscore"></span>
                </div>
                <canvas id="quantum-canvas" width="400" height="500" aria-label="Quantum Attack field" role="img"></canvas>
                
                <!-- Touch controls for mobile/iPad -->
                <div class="quantum-mobile-controls" style="display: none;">
                    <div class="quantum-states">
                        <button id="quantum-move-left" class="quantum-state-btn" title="Move Left">â†</button>
                        <button id="quantum-move-right" class="quantum-state-btn" title="Move Right">â†’</button>
                        <button id="quantum-switch-frame" class="quantum-state-btn" title="Switch Frame">â‡…</button>
                        <button id="quantum-swap-blocks" class="quantum-state-btn" title="Swap Blocks">â‡„</button>
                    </div>
                </div>
                
                <div style="margin-top:8px; font-size: 14px; color:#666;">
                    <span class="desktop-controls">â† â†’ ç§»åŠ¨æ ï¼Œâ†‘â†“ åˆ‡æ¢æ ï¼Œç©ºæ ¼ äº¤æ¢å—</span>
                    <span class="mobile-controls" style="display: none;">ã‚¿ãƒƒãƒã§æ“ä½œã€ãƒœã‚¿ãƒ³ã§æ ç§»å‹•ãƒ»ãƒ–ãƒ­ãƒƒã‚¯äº¤æ›</span>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/js/minesweeper.js"></script>
    <script src="assets/js/snake.js"></script>
    <script src="assets/js/plane.js"></script>
    <script src="assets/js/mole.js"></script>
    <script>
    let currentLang = 'zh';
    let currentGame = 'minesweeper';
    const langMap = {
        zh: {
            title: 'å°æ¸¸æˆåˆé›†',
            menu: 'èœå•',
            tabs: ['æ‰«é›·', 'è´ªåƒè›‡', 'é£æœºå¤§æˆ˜', 'æ‰“åœ°é¼ ', 'ä¿„ç½—æ–¯æ–¹å—', 'é‡å­æ”»å‡»'],
            newgame: ['å¼€å§‹æ–°æ¸¸æˆ', 'å¼€å§‹æ–°æ¸¸æˆ', 'å¼€å§‹æ–°æ¸¸æˆ', 'å¼€å§‹æ–°æ¸¸æˆ', 'å¼€å§‹æ–°æ¸¸æˆ', 'å¼€å§‹æ–°æ¸¸æˆ'],
            labels: {
                flags: 'æ——æ ‡',
                bestTime: 'æœ€å¿«æ—¶é—´',
                gameOver: 'æ¸¸æˆå¤±è´¥ï¼',
                winUseTime: 'æ­å–œé€šå…³ï¼ç”¨æ—¶ï¼š',
                winFlagAllUseTime: 'æ­å–œé€šå…³ï¼ï¼ˆæ——æ ‡å…¨éƒ¨æ­£ç¡®ï¼‰ç”¨æ—¶ï¼š',
                score: 'å¾—åˆ†',
                highScore: 'æœ€é«˜åˆ†'
            }
        },
        en: {
            title: 'Mini Game Collection',
            menu: 'Menu',
            tabs: ['Minesweeper', 'Snake', 'Plane War', 'Whac-A-Mole', 'Tetris', 'Quantum Attack'],
            newgame: ['New Game', 'New Game', 'New Game', 'New Game', 'New Game', 'New Game'],
            labels: {
                flags: 'Flags',
                bestTime: 'Best Time',
                gameOver: 'Game Over!',
                winUseTime: 'Congrats! Time: ',
                winFlagAllUseTime: 'Congrats! (All flags correct) Time: ',
                score: 'Score',
                highScore: 'High Score'
            }
        },
        ja: {
            title: 'ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³',
            menu: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼',
            tabs: ['ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼', 'ã‚¹ãƒãƒ¼ã‚¯', 'ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°', 'ãƒ¢ã‚°ãƒ©ãŸãŸã', 'ãƒ†ãƒˆãƒªã‚¹', 'ã‚¯ã‚¢ãƒ³ãƒ‰ã‚¢ã‚¿ãƒƒã‚¯'],
            newgame: ['æ–°ã—ã„ã‚²ãƒ¼ãƒ ', 'æ–°ã—ã„ã‚²ãƒ¼ãƒ ', 'æ–°ã—ã„ã‚²ãƒ¼ãƒ ', 'æ–°ã—ã„ã‚²ãƒ¼ãƒ ', 'æ–°ã—ã„ã‚²ãƒ¼ãƒ ', 'æ–°ã—ã„ã‚²ãƒ¼ãƒ '],
            labels: {
                flags: 'æ——',
                bestTime: 'æœ€é€Ÿã‚¿ã‚¤ãƒ ',
                gameOver: 'ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼',
                winUseTime: 'ã‚¯ãƒªã‚¢ï¼ æ™‚é–“ï¼š',
                winFlagAllUseTime: 'ã‚¯ãƒªã‚¢ï¼ï¼ˆæ——ãŒå…¨éƒ¨æ­£ã—ã„ï¼‰æ™‚é–“ï¼š',
                score: 'ã‚¹ã‚³ã‚¢',
                highScore: 'ãƒã‚¤ã‚¹ã‚³ã‚¢'
            }
        }
    };
    // æš´éœ²åˆ°å…¨å±€ï¼Œä¾›å¤–éƒ¨è„šæœ¬ä½¿ç”¨
    window.langMap = langMap;
    function setLang(lang) {
        currentLang = lang;
        window.currentLang = currentLang;
        // é¡¶éƒ¨é›†åˆæ ‡é¢˜ä¸å†å›ºå®šï¼Œéšæ‰€é€‰æ¸¸æˆåˆ‡æ¢ï¼šæ­¤å¤„ä»…åœ¨æ— é€‰ä¸­æ¸¸æˆæ—¶å›é€€
        if (!currentGame) {
            document.getElementById('main-title').textContent = langMap[lang].title;
        }
        document.getElementById('tab-minesweeper').textContent = langMap[lang].tabs[0];
        document.getElementById('tab-snake').textContent = langMap[lang].tabs[1];
        document.getElementById('tab-plane').textContent = langMap[lang].tabs[2];
        document.getElementById('tab-mole').textContent = langMap[lang].tabs[3];
        document.getElementById('tab-tetris').textContent = langMap[lang].tabs[4];
        document.getElementById('tab-quantum').textContent = langMap[lang].tabs[5];
        document.getElementById('minesweeper-newgame').textContent = langMap[lang].newgame[0];
        document.getElementById('snake-newgame').textContent = langMap[lang].newgame[1];
        document.getElementById('plane-newgame').textContent = langMap[lang].newgame[2];
        document.getElementById('mole-newgame').textContent = langMap[lang].newgame[3];
        document.getElementById('tetris-newgame').textContent = langMap[lang].newgame[4];
        document.getElementById('quantum-newgame').textContent = langMap[lang].newgame[5];
        const toggleBtn = document.getElementById('menu-toggle');
        if (toggleBtn) toggleBtn.textContent = 'â˜° ' + langMap[lang].menu;
        // è¯­è¨€åˆ‡æ¢åï¼Œåˆ·æ–°æ ‡é¢˜ä»¥åŒ¹é…å½“å‰æ¸¸æˆ
        if (currentGame) {
            const mapIdx = { minesweeper:0, snake:1, plane:2, mole:3, tetris:4, quantum:5 };
            document.getElementById('main-title').textContent = langMap[currentLang].tabs[mapIdx[currentGame]];
        }
    }
    function showGame(game) {
        currentGame = game;
        window.currentGame = currentGame;
        document.getElementById('minesweeper-section').style.display = (game === 'minesweeper') ? '' : 'none';
        document.getElementById('snake-section').style.display = (game === 'snake') ? '' : 'none';
        document.getElementById('plane-section').style.display = (game === 'plane') ? '' : 'none';
        document.getElementById('mole-section').style.display = (game === 'mole') ? '' : 'none';
        document.getElementById('tetris-section').style.display = (game === 'tetris') ? '' : 'none';
        document.getElementById('quantum-section').style.display = (game === 'quantum') ? '' : 'none';
        document.getElementById('tab-minesweeper').classList.toggle('active', game === 'minesweeper');
        document.getElementById('tab-snake').classList.toggle('active', game === 'snake');
        document.getElementById('tab-plane').classList.toggle('active', game === 'plane');
        document.getElementById('tab-mole').classList.toggle('active', game === 'mole');
        document.getElementById('tab-tetris').classList.toggle('active', game === 'tetris');
        document.getElementById('tab-quantum').classList.toggle('active', game === 'quantum');
        // æ ‡é¢˜è·Ÿéšæ‰€é€‰æ¸¸æˆ
        const mapIdx = { minesweeper:0, snake:1, plane:2, mole:3, tetris:4, quantum:5 };
        document.getElementById('main-title').textContent = langMap[currentLang].tabs[mapIdx[game]];
        // å°å±åˆ‡æ¢æ¸¸æˆåè‡ªåŠ¨æ”¶èµ·èœå•
        if (window.innerWidth <= 900) {
            const menu = document.getElementById('menu-buttons');
            const toggle = document.getElementById('menu-toggle');
            menu.classList.remove('expanded');
            toggle.setAttribute('aria-expanded', 'false');
        }
    }
    function toggleMenu(){
        const menu = document.getElementById('menu-buttons');
        const expanded = menu.classList.toggle('expanded');
        document.getElementById('menu-toggle').setAttribute('aria-expanded', expanded ? 'true' : 'false');
    }
    // é»˜è®¤ä¸­æ–‡ + æ˜¾ç¤ºæ‰«é›·
    setLang('zh');
    showGame('minesweeper');
    </script>
    <!-- å·¦ä¸‹è§’æ‚¬æµ®è¯­è¨€åˆ‡æ¢ï¼ˆæŠ˜å ï¼‰ -->
    <div id="lang-floating" aria-label="language switcher">
      <button id="lang-toggle" class="flag-btn" aria-expanded="false">ğŸŒ</button>
      <div id="lang-menu" class="lang-menu" role="menu" hidden>
        <button class="flag-btn" role="menuitem" title="ä¸­æ–‡" onclick="setLang('zh');hideLangMenu()">ğŸ‡¨ğŸ‡³</button>
        <button class="flag-btn" role="menuitem" title="English" onclick="setLang('en');hideLangMenu()">ğŸ‡ºğŸ‡¸</button>
        <button class="flag-btn" role="menuitem" title="æ—¥æœ¬èª" onclick="setLang('ja');hideLangMenu()">ğŸ‡¯ğŸ‡µ</button>
      </div>
    </div>
    <script>
      (function(){
        const toggle = document.getElementById('lang-toggle');
        const menu = document.getElementById('lang-menu');
        window.hideLangMenu = function(){ menu.hidden = true; toggle.setAttribute('aria-expanded','false'); };
        function openMenu(){ menu.hidden = false; toggle.setAttribute('aria-expanded','true'); }
        function closeMenu(){ menu.hidden = true; toggle.setAttribute('aria-expanded','false'); }
        toggle.addEventListener('click', (e)=>{
          e.stopPropagation();
          if (menu.hidden) {
            openMenu();
          } else {
            closeMenu();
          }
        });
        toggle.addEventListener('touchstart', (e)=>{ 
          e.stopPropagation(); 
          if (menu.hidden) {
            openMenu();
          } else {
            closeMenu();
          }
        }, {passive:true});
        menu.addEventListener('click', (e)=>{ e.stopPropagation(); });
        document.addEventListener('click', (e)=>{
          if (!menu.contains(e.target) && e.target !== toggle) closeMenu();
        });
        document.addEventListener('touchstart', (e)=>{
          if (!menu.contains(e.target) && e.target !== toggle) closeMenu();
        }, {passive:true});
      })();
    </script>
    <!-- Tetris script -->
    <script src="assets/js/tetris.js?v=20250813b"></script>
    <!-- Quantum Attack script -->
    <script src="assets/js/quantum-attack.js"></script>
</body>
</html> 